<!-- VERTICAL (Figma original) -->
<article
  *ngIf="layout === 'vertical'; else horizontalCard"
  class="w-auto md:w-[250px] h-auto md:h-[500px] p-3 rounded-2xl border border-deafuera bg-white box-border flex flex-col"
  (click)="goToDetail()"
>
  <!-- Imagen -->
  <div
    class="w-full flex justify-center items-start h-[220px] sm:h-60 md:h-60 overflow-hidden"
  >
    <img
      [src]="`https://app.fadiar.com:444/prueba/api/${img}`"
      [alt]="name"
      class="max-w-full max-h-full object-contain rounded-2xl"
    />
  </div>

  <!-- Info -->
  <div class="flex flex-col gap-2 mt-2">
    <div>
      <p class="text-[13px] sm:text-[14px] text-[#9E9E9E]">
        {{ categoria.name }}
      </p>
    </div>

    <div>
      <h3
        class="text-[16px] sm:text-[18px] font-bold text-primary leading-snug line-clamp-2"
      >
        {{ name }}
      </h3>
    </div>

    <div>
      <p class="text-[14px] sm:text-[16px] text-primary">Marca {{ brand }}</p>
    </div>

    <div class="flex flex-wrap gap-1">
      <p class="text-[13px] sm:text-[14px] text-accent mt-1">Garantía de</p>
      <p class="text-[13px] sm:text-[14px] text-accent mt-1">{{ warranty }}</p>
      <p class="text-[13px] sm:text-[14px] text-accent mt-1">Días</p>
    </div>

    <p class="flex items-baseline gap-1 mt-3">
      <span class="text-[20px] sm:text-[22px] font-bold text-primary">
        $ {{ price }}
      </span>
      <span class="text-[18px] sm:text-[22px] text-primary">USD</span>
    </p>
  </div>

  <!-- Footer (cantidad + carrito) -->
  <div
    class="mt-auto flex flex-row items-center justify-between gap-3 sm:gap-4"
  >
    <!-- Cantidad -->
    <div
      class="flex items-center justify-center min-w-[110px] h-10 rounded-xl border border-deafuera bg-white"
    >
      <!-- botón menos -->
      <button class="px-2 py-1 text-accent" (click)="onDecrement()">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g id="Edit / Remove_Minus">
            <path
              id="Vector"
              d="M6 12H18"
              stroke="gold"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </g>
        </svg>
      </button>

      <div class="flex gap-1">
        <span class="text-xl sm:text-2xl text-deafuera font-light">|</span>
        <span class="text-xl sm:text-2xl text-primary">{{ quantity }}</span>
        <span class="text-xl sm:text-2xl text-deafuera font-light">|</span>
      </div>

      <!-- botón más -->
      <button class="px-2 py-1 text-accent" (click)="onIncrement()">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g id="Edit / Add_Plus">
            <path
              id="Vector"
              d="M6 12H12M12 12H18M12 12V18M12 12V6"
              stroke="gold"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </g>
        </svg>
      </button>
    </div>

    <div
      class="flex flex-row justify-center border min-w-20 w-20 h-10 rounded-2xl border-primary"
    >
      <!-- MODO CATÁLOGO: botón Añadir al carrito -->
      @if (isCatalogMode) {
      <button
        type="button"
        class="font-medium hover:opacity-90"
        (click)="$event.stopPropagation(); addToCart()"
      >
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M15 15C13.8954 15 13 15.8954 13 17C13 18.1046 13.8954 19 15 19C16.1046 19 17 18.1046 17 17C17 15.8954 16.1046 15 15 15ZM15 15H7.29395C6.83288 15 6.60193 15 6.41211 14.918C6.24466 14.8456 6.09938 14.7291 5.99354 14.5805C5.8749 14.414 5.82719 14.1913 5.73274 13.7505L3.27148 2.26465C3.17484 1.81363 3.12587 1.58838 3.00586 1.41992C2.90002 1.27135 2.75477 1.15441 2.58732 1.08205C2.39746 1 2.16779 1 1.70653 1H1M4 4H16.8732C17.595 4 17.9555 4 18.1978 4.15036C18.41 4.28206 18.5653 4.48862 18.633 4.729C18.7104 5.00343 18.611 5.34996 18.411 6.04346L17.0264 10.8435C16.9068 11.2581 16.8469 11.465 16.7256 11.6189C16.6185 11.7547 16.4772 11.861 16.317 11.9263C16.1361 12 15.9211 12 15.4921 12H5.73047M6 19C4.89543 19 4 18.1046 4 17C4 15.8954 4.89543 15 6 15C7.10457 15 8 15.8954 8 17C8 18.1046 7.10457 19 6 19Z"
            stroke="#022954"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>
      }
      <!-- MODO CARRITO: cantidad + eliminar -->
      @if (isCartMode) {
      <button
        type="button"
        class="text-background-dark flex items-center gap-1"
        (click)="$event.stopPropagation(); onRemove()"
      >
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 26"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M14.3333 10.3333V19.6667M9 10.3333V19.6667M3.66667 5V20.7333C3.66667 22.2268 3.66667 22.973 3.95732 23.5435C4.21298 24.0452 4.62063 24.454 5.1224 24.7096C5.69227 25 6.43866 25 7.92921 25H15.4041C16.8947 25 17.64 25 18.2099 24.7096C18.7116 24.454 19.1206 24.0452 19.3763 23.5435C19.6667 22.9736 19.6667 22.228 19.6667 20.7375V5M3.66667 5H6.33333M3.66667 5H1M6.33333 5H17M6.33333 5C6.33333 3.75749 6.33333 3.13654 6.53632 2.64648C6.80697 1.99308 7.32576 1.47364 7.97917 1.20299C8.46922 1 9.09082 1 10.3333 1H13C14.2425 1 14.8638 1 15.3538 1.20299C16.0072 1.47364 16.5262 1.99308 16.7969 2.64648C16.9999 3.13654 17 3.75749 17 5M17 5H19.6667M19.6667 5H22.3333"
            stroke="#1E1E1E"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>
      }
    </div>
  </div>
</article>

<!-- HORIZONTAL -->
<ng-template #horizontalCard>
  <article
    class="w-full md:w-[500px] p-3 md:pl-5 rounded-2xl border border-deafuera bg-white box-border flex flex-col md:flex-row items-center md:items-center gap-4 md:gap-6"
    (click)="goToDetail()"
  >
    <!-- Imagen izquierda -->
    <div
      class="w-full md:w-[220px] h-[200px] md:h-full flex items-center justify-center"
    >
      <img
        [src]="`https://app.fadiar.com:444/prueba/api/${img}`"
        [alt]="name"
        class="max-w-[250px] max-h-[220px] object-contain rounded-2xl"
      />
    </div>

    <!-- Columna derecha: info + controles -->
    <div class="flex-1 w-full flex flex-col justify-between">
      <!-- Info -->
      <div class="flex flex-col gap-1">
        <p class="text-[13px] sm:text-[14px] text-[#9E9E9E]">
          {{ categoria.name }}
        </p>

        <h3
          class="text-[16px] sm:text-[18px] font-bold text-primary leading-snug line-clamp-2"
        >
          {{ name }}
        </h3>

        <p class="text-[14px] sm:text-[16px] text-primary">Marca {{ brand }}</p>

        <div class="flex flex-wrap gap-1">
          <p class="text-[13px] sm:text-[14px] text-accent mt-1">Garantía de</p>
          <p class="text-[13px] sm:text-[14px] text-accent mt-1">
            {{ warranty }}
          </p>
          <p class="text-[13px] sm:text-[14px] text-accent mt-1">Días</p>
        </div>

        <p class="flex items-baseline gap-1 mt-2">
          <span class="text-[20px] sm:text-[22px] font-bold text-primary">
            $ {{ price }}
          </span>
          <span class="text-[16px] text-primary"> USD </span>
        </p>
      </div>

      <!-- Controles abajo -->
      <div class="mt-3 md:mt-auto flex items-center justify-between gap-3">
        <!-- Cantidad -->
        <div
          class="flex items-center justify-center min-w-[110px] h-10 rounded-xl border border-deafuera bg-white"
        >
          <!-- botón menos -->
          <button class="px-2 py-1 text-accent" (click)="onDecrement()">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="Edit / Remove_Minus">
                <path
                  id="Vector"
                  d="M6 12H18"
                  stroke="gold"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </g>
            </svg>
          </button>

          <div class="flex gap-1">
            <span class="text-xl sm:text-2xl text-deafuera font-light">|</span>
            <span class="text-xl sm:text-2xl text-primary">
              {{ quantity }}
            </span>
            <span class="text-xl sm:text-2xl text-deafuera font-light">|</span>
          </div>

          <!-- botón más -->
          <button class="px-2 py-1 text-accent" (click)="onIncrement()">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="Edit / Add_Plus">
                <path
                  id="Vector"
                  d="M6 12H12M12 12H18M12 12V18M12 12V6"
                  stroke="gold"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </g>
            </svg>
          </button>
        </div>

        <div
          class="flex flex-row justify-center border min-w-20 w-20 h-10 rounded-2xl border-primary"
        >
          <!-- MODO CATÁLOGO: botón Añadir al carrito -->
          @if (isCatalogMode) {
          <button
            type="button"
            class="font-medium hover:opacity-90"
            (click)="$event.stopPropagation(); addToCart()"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M15 15C13.8954 15 13 15.8954 13 17C13 18.1046 13.8954 19 15 19C16.1046 19 17 18.1046 17 17C17 15.8954 16.1046 15 15 15ZM15 15H7.29395C6.83288 15 6.60193 15 6.41211 14.918C6.24466 14.8456 6.09938 14.7291 5.99354 14.5805C5.8749 14.414 5.82719 14.1913 5.73274 13.7505L3.27148 2.26465C3.17484 1.81363 3.12587 1.58838 3.00586 1.41992C2.90002 1.27135 2.75477 1.15441 2.58732 1.08205C2.39746 1 2.16779 1 1.70653 1H1M4 4H16.8732C17.595 4 17.9555 4 18.1978 4.15036C18.41 4.28206 18.5653 4.48862 18.633 4.729C18.7104 5.00343 18.611 5.34996 18.411 6.04346L17.0264 10.8435C16.9068 11.2581 16.8469 11.465 16.7256 11.6189C16.6185 11.7547 16.4772 11.861 16.317 11.9263C16.1361 12 15.9211 12 15.4921 12H5.73047M6 19C4.89543 19 4 18.1046 4 17C4 15.8954 4.89543 15 6 15C7.10457 15 8 15.8954 8 17C8 18.1046 7.10457 19 6 19Z"
                stroke="#022954"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
          }
          <!-- MODO CARRITO: cantidad + eliminar -->
          @if (isCartMode) {
          <button
            type="button"
            class="text-background-dark flex items-center"
            (click)="$event.stopPropagation(); onRemove()"
          >
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 26"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M14.3333 10.3333V19.6667M9 10.3333V19.6667M3.66667 5V20.7333C3.66667 22.2268 3.66667 22.973 3.95732 23.5435C4.21298 24.0452 4.62063 24.454 5.1224 24.7096C5.69227 25 6.43866 25 7.92921 25H15.4041C16.8947 25 17.64 25 18.2099 24.7096C18.7116 24.454 19.1206 24.0452 19.3763 23.5435C19.6667 22.9736 19.6667 22.228 19.6667 20.7375V5M3.66667 5H6.33333M3.66667 5H1M6.33333 5H17M6.33333 5C6.33333 3.75749 6.33333 3.13654 6.53632 2.64648C6.80697 1.99308 7.32576 1.47364 7.97917 1.20299C8.46922 1 9.09082 1 10.3333 1H13C14.2425 1 14.8638 1 15.3538 1.20299C16.0072 1.47364 16.5262 1.99308 16.7969 2.64648C16.9999 3.13654 17 3.75749 17 5M17 5H19.6667M19.6667 5H22.3333"
                stroke="#1E1E1E"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
          }
        </div>
      </div>
    </div>
  </article>
</ng-template>
